{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/userTable.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/userTable.vue","mtime":1599188963061},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/css-loader/dist/cjs.js","mtime":1594082400206},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594082401315},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/postcss-loader/src/index.js","mtime":1594082403147},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtdGFibGUgLnJlZC1yb3cgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDAsIDAsIDAuMSk7Cn0KCi5lbC10YWJsZSAuZ3JlZW4tcm93IHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMjU1LCAwLCAwLjEpOwp9CgouZWwtdGFibGUgLndoaXRlLXJvdyB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1MywgMjQ1LCAyMzAsIDAuNSk7Cn0K"},{"version":3,"sources":["userTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"userTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div style=\"width: 100%\">\n        <div style=\"float: left; width: 810px\">\n            <el-table\n                    id=\"el-table\"\n                    :data=\"show\"\n                    :key=\"random\"\n                    :row-class-name=\"rowClassNameFilter\"\n                    width=\"100%\">\n                <el-table-column\n                        fixed\n                        prop=\"id\"\n                        label=\"编号\"\n                        width=\"50\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"name\"\n                        label=\"姓名\"\n                        width=\"100\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"Type\"\n                        label=\"权限\"\n                        width=\"80\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"birthday\"\n                        label=\"生日\"\n                        width=\"120\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"sex\"\n                        label=\"性别\"\n                        column-key=\"sex\"\n                        width=\"60\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"reg_time\"\n                        label=\"注册时间\"\n                        width=\"160\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"phone\"\n                        label=\"电话号码\"\n                        width=\"120\">\n                </el-table-column>\n                <el-table-column\n                        label=\"操作\"\n                        width=\"120\">\n                    <template slot-scope=\"scope\" style=\"text-align: center;\">\n                        <div v-if=\"scope.row.id === 1\">\n                            <el-button type=\"primary\" disabled size=\"small\">老板</el-button>\n                        </div>\n                        <div v-else-if=\"scope.row.Type !== '被封禁'\">\n                            <el-button @click=\"handleClick(scope.row,scope.row.type-8)\" type=\"danger\" size=\"small\">封禁</el-button>\n                        </div>\n                        <div v-else>\n                            <el-button @click=\"handleClick(scope.row,scope.row.type+8)\" type=\"success\" size=\"small\">解封</el-button>\n                        </div>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </div>\n\n        <div class=\"search\" style=\"height: 450px; float: left; margin-left: 50px;\">\n            <div style=\"float: none\">\n                <el-input\n                        placeholder=\"输入条件\"\n                        v-model=\"input\"\n                        style=\"width: 50%; float: left; margin-bottom: 5%; margin-right: 2%\"\n                        @keyup.native.enter=\"search(1)\">\n                </el-input>\n                <div style=\"float: left\">\n                    <el-button type=\"primary\" @click=\"search(1)\">搜索</el-button>\n                    <el-button v-if=\"search_flag === true\" type=\"danger\" @click=\"search(0)\">取消</el-button>\n                </div>\n            </div>\n\n            <div class=\"select\">\n                <p style=\"clear: both; color: darkgray; margin-bottom: 5%\">选择条件：</p>\n                <el-radio-group v-model=\"radio\" style=\"float: left;margin-bottom: 5%\" @change=\"change\">\n                    <el-radio-button label=\"编号\"></el-radio-button>\n                    <el-radio-button label=\"姓名\"></el-radio-button>\n                    <el-radio-button label=\"权限\"></el-radio-button>\n                    <el-radio-button label=\"电话号码\"></el-radio-button>\n                </el-radio-group>\n            </div>\n\n            <div class=\"details\">\n                <span style=\"clear: both; color: darkgray; margin-bottom: 5%\">\n                    详细信息：\n                    <el-popover\n                            placement=\"top-start\"\n                            title=\"权限规则\"\n                            width=\"200\"\n                            trigger=\"hover\"\n                            content=\"1/3/5/7: 评论管理员; 2/3/6/7: 动态管理员; 4/5/6/7: 用户管理员;\">\n                        <el-button slot=\"reference\" type=\"text\" icon=\"el-icon-question\"></el-button>\n                    </el-popover>\n                </span>\n\n                <el-card shadow=\"hover\" style=\"width: 55%\">\n                    <p>当前管理员ID : <span style=\"color: red\">{{this.id}}</span> </p>\n                    <el-divider></el-divider>\n                    <p>搜索结果共计 <span style=\"color:red\">{{this.show.length}}</span> 条记录</p>\n                </el-card>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\n    import axios from \"axios\";\n\n    export default {\n        data() {\n            return {\n                random: 0,\n                id: 1,\n                input: '',\n                radio: '姓名',\n                search_flag: '',\n                users: [],\n                show: []\n            }\n        },\n        created() {\n            this.id = sessionStorage.getItem(\"id\");\n            this.init();\n        },\n        methods: {\n            init(){\n                let url = 'http://localhost:8088/user/getAll';\n                axios.get(url, {\n                    headers: {\n                        token: sessionStorage.getItem(\"token\")\n                    }\n                }).then(res => {\n                        console.log(res.data);\n                        this.users = res.data;\n                        for (let i = 0; i < this.users.length; i++) {\n                            if (this.users[i].type < 0)\n                                this.users[i].Type = '被封禁';\n                            else if (this.users[i].type === 0)\n                                this.users[i].Type = '普通用户';\n                            else if (this.users[i].type === 8)\n                                this.users[i].Type = '老板';\n                            else\n                                this.users[i].Type = '管理员:' + this.users[i].type;\n\n                            if (this.users[i].sex === -1)\n                                this.users[i].sex='未知';\n                            else if (this.users[i].sex === 1)\n                                this.users[i].sex='男';\n                            else\n                                this.users[i].sex='女';\n                        }\n\n                        this.show = this.users;\n                    }\n                ).catch(err => {\n                    console.log(err);\n                });\n            },\n            search(i) {\n                if(this.input === '' || i === 0) {\n                    this.search_flag = false;\n                    this.input = '';\n                    return this.init();\n                }\n\n                this.search_flag = true;\n\n                let newArr = [];\n                this.$message.success(this.radio);\n                for (let i = 0; i < this.users.length; ++i) {\n                    switch (this.radio) {\n                        case \"姓名\":\n                            if (this.users[i].name.indexOf(this.input) !== -1)\n                                newArr.push(this.users[i]);\n                            break;\n                        case \"编号\":\n                            if (this.users[i].id === Number(this.input))\n                                newArr.push(this.users[i]);\n                            break;\n                        case \"权限\":\n                            if (this.users[i].Type.indexOf(this.input) !== -1)\n                                newArr.push(this.users[i]);\n                            break;\n                        case \"电话号码\":\n                            if (this.users[i].phone.indexOf(this.input) !== -1)\n                                newArr.push(this.users[i]);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                this.show = newArr;\n            },\n            change(item) {\n                this.radio = item;\n            },\n            handleClick(row, tar) {\n                let url='http://localhost:8088/user/auth?sub=' + sessionStorage.getItem('id')\n                            +'&obj=' + row.id + '&tar=' + tar;\n\n                axios.post(url, {}, {\n                    headers: {\n                        token: sessionStorage.getItem(\"token\")\n                    }\n                }).then(res => {\n                    if(res.data === 'success'){\n                        for (let i = 0; i < this.users.length; ++i){\n                            if (this.users[i].id === row.id) {\n                                this.users[i].type = tar;\n                                this.users[i].Type = (tar < 0) ? '被封禁' : ((tar === 0) ? '普通用户' : ('管理员:' + tar));\n                                this.random=Math.random();\n                                this.$message.success(res.data)\n                                return true;\n                            }\n                        }\n\n                        this.show = this.users;\n                    }\n                    else {\n                        this.$message.warning(res.data);\n                        return false;\n                    }\n                })\n            },\n            // eslint-disable-next-line no-unused-vars\n            rowClassNameFilter({row, rowIndex}) {\n                if (row.Type === '老板' || row.Type.indexOf('管理员') !== -1)\n                    return 'green-row';\n                else if (row.Type==='普通用户')\n                    return 'white-row';\n                else\n                    return 'red-row';\n            }\n        }\n    }\n</script>\n\n<style >\n    .el-table .red-row {\n        background: rgba(255, 0, 0, 0.1);\n    }\n\n    .el-table .green-row {\n        background: rgba(0, 255, 0, 0.1);\n    }\n\n    .el-table .white-row {\n        background: rgba(253, 245, 230, 0.5);\n    }\n</style>\n"]}]}