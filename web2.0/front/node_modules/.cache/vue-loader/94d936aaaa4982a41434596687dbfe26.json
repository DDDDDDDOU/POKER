{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/signupForm.vue?vue&type=style&index=0&id=1cccd3e8&scoped=true&lang=css&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/signupForm.vue","mtime":1594725162929},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/css-loader/dist/cjs.js","mtime":1594082400206},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594082401315},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/postcss-loader/src/index.js","mtime":1594082403147},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJlZ2lzdGVyUm9vdCB7CiAgICB3aWR0aDogMjIwcHg7CiAgICBoZWlnaHQ6IDM2MHB4OwogICAgYm9yZGVyLXJhZGl1czogMTVweDsKICAgIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7CiAgICBtYXJnaW46IGF1dG8gYXV0bzsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICBib3gtc2hhZG93OiAwIDAgMjVweCAjYzZjNmM2Owp9Ci5yZWdpc3RlclRpdGxlIHsKICAgIG1hcmdpbjogMTVweCBhdXRvIDIwcHggYXV0bzsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGNvbG9yOiAjNTA1MDUwOwp9Cg=="},{"version":3,"sources":["signupForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"signupForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-form :rules=\"rules\" :model=\"registerForm\" class=\"registerRoot\">\n        <h3 class=\"registerTitle\">注册</h3>\n        <el-form-item prop=\"phone\">\n            <el-input type=\"text\" v-model=\"registerForm.phone\" auto-complete=\"off\"\n                      placeholder=\"请输入手机号码\"/>\n        </el-form-item>\n        <el-form-item prop=\"name\">\n            <el-input type=\"text\" v-model=\"registerForm.name\" auto-complete=\"off\"\n                      placeholder=\"请输入用户名\"/>\n        </el-form-item>\n        <el-form-item >\n            <el-date-picker\n                    v-model=\"registerForm.birthday\"\n                    type=\"date\"\n                    size=\"middle\"\n                    format=\"yyyy-MM-dd\"\n                    placeholder=\"请选择生日\"\n                    clear-icon=\"none\"\n                    style=\"text-align: left\"\n            >\n            </el-date-picker>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n            <el-input type=\"text\" v-model=\"registerForm.password\" auto-complete=\"off\"\n                      placeholder=\"请输入密码\" show-password/>\n        </el-form-item>\n        <el-button type=\"primary\" style=\"width: 100%\" @click=\"register\">注册</el-button>\n    </el-form>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        name: \"SignUpForm\",\n        data() {\n            return {\n                registerForm: {\n                    phone    : '',\n                    name     : '',\n                    password : '',\n                    birthday : '',\n                    type     : 0, // 默认为普通用户\n                    sex      : 1, // 默认为男（1）\n                    avatar: {\n                        base64: 'http://bpic.588ku.com/element_pic/01/55/09/6357474dbf2409c.jpg'\n                    }\n                },\n                rules: {\n                    phone: [\n                        {\n                            required: true, message: '电话号码不能为空', trigger: 'blur'\n                        },{\n                            min: 11, max: 11, message: '电话号码为11位数字'\n                        }],\n                    name: [\n                        {\n                            required: true, message: '用户名不能为空', trigger: 'blur'\n                        },{\n                            min: 3, max: 12, message: '用户名长度在 3 到 12 个字符', trigger: 'blur'\n                        }],\n                    password: [\n                        {\n                            required: true, message: '密码不能为空', trigger: 'blur'\n                        },{\n                            min: 6, max: 16, message: '密码长度在 6 到 16 个字符', trigger: 'blur'\n                        }],\n                },\n            }\n        },\n        methods: {\n            nonage(date) { // 判断是否满14周岁\n                let curr = new Date();\n                if (curr.getFullYear() - date.getFullYear() < 14)\n                    return false;\n\n                if (curr.getFullYear() - date.getFullYear() === 14) {\n                    if (curr.getMonth() < date.getMonth())\n                        return false;\n\n                    if (curr.getMonth() === date.getMonth()) {\n                        if (curr.getDate() < date.getDate())\n                            return false;\n                    }\n                }\n\n                return true;\n            },\n            birth_format(date) {\n                let birth = date.getFullYear() + '-';\n                if (date.getMonth() < 10)\n                    birth += '0';\n                birth += (date.getMonth() + '-');\n\n                if (date.getDate() < 10)\n                    birth += '0';\n\n                return (birth + date.getDate());\n            },\n            register() {\n                this.$router.push('/home');\n                let form = this.registerForm;\n                let phone = form.phone;\n                if (phone.length === 0) {\n                    this.$message.error(\"电话号码不能为空!\")\n                    return;\n                } else {\n                    let format = /^(1[0-9]{10})$/;\n                    if (!format.test(phone)) {\n                        this.$message.error(\"电话号码格式不正确!\")\n                        return;\n                    }\n                }\n\n                let name = form.name;\n                if (name.length === 0) {\n                    this.$message.error(\"用户名不能为空!\")\n                    return;\n                }else if (name.length < 3 || name.length > 12) {\n                    this.$message.error(\"用户名长度须在 3 到 12 个字符!\")\n                    return;\n                }\n\n                let pwd = form.password;\n                if (pwd.length === 0) {\n                    this.$message.error(\"密码不能为空\") ;\n                    return;\n                } else if(pwd.length < 6 || pwd.length > 16) {\n                    this.$message.error(\"密码长度须在 6 到 16 个字符\");\n                    return;\n                }\n\n\n                let date = new Date(form.birth);\n                console.log(date);\n                if(!this.nonage(date)) {\n                    this.$message.error(\"未成年人不能注册账户！\");\n                    return;\n                }\n\n                form.birthday = this.birth_format(form.birthday);\n\n                let url = 'http://localhost:8088/user/reg';\n                axios.post(url, form)\n                    .then((response) =>{\n                    //这里还缺少错误处理，比如网络错误什么的\n                        console.log(response)\n                    switch (response.data) {\n                        case \"phone error\":\n                            this.$message.error(\"这个手机号已注册过啦！\");\n                            break;\n                        case \"name error\":\n                            this.$message.error(\"这个名字已经有人用过啦！\");\n                            break;\n                        case \"success\":\n                            this.$message.success(\"注册成功！\");\n                            this.$router.push('/home');\n                            break;\n                        default:\n                            break;\n                    }\n                }).catch(err=>{\n                    console.log(err)\n                })\n                ;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .registerRoot {\n        width: 220px;\n        height: 360px;\n        border-radius: 15px;\n        background-clip: padding-box;\n        margin: auto auto;\n        border: 1px solid #eaeaea;\n        box-shadow: 0 0 25px #c6c6c6;\n    }\n    .registerTitle {\n        margin: 15px auto 20px auto;\n        text-align: center;\n        color: #505050;\n    }\n</style>\n"]}]}