{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/information.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/information.vue","mtime":1595409854164},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js","mtime":1594082385506},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJhc2ljX2ZsYWc6IGZhbHNlLAogICAgICAgICAgICBjb250YWN0X2ZsYWc6IGZhbHNlLAogICAgICAgICAgICBuZXduYW1lOiIiLAogICAgICAgICAgICBuZXdwaG9uZToiIiwKICAgICAgICAgICAgYmlydGhyaWdodDoiIiwKICAgICAgICAgICAgc2V4U3RyOiAn5pyq55+lJywKICAgICAgICAgICAgZXJyb3JtZXNzYWdlOiB7CiAgICAgICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivpeeUqOaIt+mHjeWkjeaIluagvOW8j+S4jeato+ehriIsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwaG9uZTogewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLnlLXor53lj7fnoIHmoLzlvI/kuI3mraPnoa7miJbph43lpI0iLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXNlcjogewogICAgICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgICAgICBuYW1lOiAn5Lqk6YCa5aSn5a2mJywKICAgICAgICAgICAgICAgIGJpcnRoZGF5OiAnMTg5Ni0wNC0wNycsCiAgICAgICAgICAgICAgICBzZXg6IC0xLAogICAgICAgICAgICAgICAgcmVnX3RpbWU6ICcyMDIwLTA3LTA5JywKICAgICAgICAgICAgICAgIGVtYWlsOiAnc2UxMjhAc2p0dS5lZHUuY24nLAogICAgICAgICAgICAgICAgcGhvbmU6ICcwMjEtMzQyMDAwMDAnLAogICAgICAgICAgICAgICAgdXNlck1vbmdvOiB7fQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZW5lcmF0b3IoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2V4KCkgewogICAgICAgICAgICBzd2l0Y2ggKHRoaXMudXNlci5zZXgpIHsKICAgICAgICAgICAgICAgIGNhc2UgIjEiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAi55S3IjsKICAgICAgICAgICAgICAgIGNhc2UgIjAiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAi5aWzIjsKICAgICAgICAgICAgICAgIGNhc2UgIi0xIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIuacquefpSI7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAi5pyq55+lIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V4U3RyVG9OdW0oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNleFN0ciA9PT0gIueUtyIpIHsKICAgICAgICAgICAgICAgIHRoaXMudXNlci5zZXggPSAiMSI7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuc2V4U3RyID09PSAi5aWzIikgewogICAgICAgICAgICAgICAgdGhpcy51c2VyLnNleCA9ICIwIjsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnVzZXIuc2V4ID0gIi0xIjsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfSwKICAgICAgICBub25hZ2UoZGF0ZSkgeyAvLyDliKTmlq3mmK/lkKbmu6ExNOWRqOWygQogICAgICAgICAgICBsZXQgY3VyciA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGlmKChjdXJyLmdldEZ1bGxZZWFyKCktZGF0ZS5nZXRGdWxsWWVhcigpPjE0ICkKICAgICAgICAgICAgICAgIHx8IChjdXJyLmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IDE0KQogICAgICAgICAgICAgICAgJiYgKGN1cnIuZ2V0TW9udGgoKSA+IGRhdGUuZ2V0TW9udGgoKQogICAgICAgICAgICAgICAgICAgIHx8IChjdXJyLmdldE1vbnRoKCkgPT09IGRhdGUuZ2V0TW9udGgoKSAmJiBjdXJyLmdldERhdGUoKT5kYXRlLmdldERhdGUoKSkpKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9LAogICAgICAgIGJpcnRoX2Zvcm1hdChkYXRlKSB7CiAgICAgICAgICAgIGxldCBiaXJ0aCA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJzsKICAgICAgICAgICAgaWYgKGRhdGUuZ2V0TW9udGgoKSA8IDkpCiAgICAgICAgICAgICAgICBiaXJ0aCArPSAnMCc7CiAgICAgICAgICAgIGxldCBtb250aD1kYXRlLmdldE1vbnRoKCkrMTsKICAgICAgICAgICAgYmlydGggKz0gKG1vbnRoKyAnLScpOwoKICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RGF0ZSgpIDwgMTApCiAgICAgICAgICAgICAgICBiaXJ0aCArPSAnMCc7CgogICAgICAgICAgICByZXR1cm4gKGJpcnRoICsgZGF0ZS5nZXREYXRlKCkpOwogICAgICAgIH0sCiAgICAgICAgYWdlKCkgewogICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGxldCB5ZWFyID0gTnVtYmVyKHRoaXMudXNlci5iaXJ0aGRheS5zdWJzdHIoMCwgNCkpOwogICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpIC0geWVhcjsKICAgICAgICB9LAogICAgICAgIGdlbmVyYXRvcigpIHsKICAgICAgICAgICAgdGhpcy51c2VyLmlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiaWQiKTsKICAgICAgICAgICAgdGhpcy51c2VyLm5hbWUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJuYW1lIik7CiAgICAgICAgICAgIHRoaXMudXNlci5yZWdfdGltZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInJlZ190aW1lIik7CiAgICAgICAgICAgIHRoaXMudXNlci5waG9uZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInBob25lIik7CiAgICAgICAgICAgIHRoaXMudXNlci5zZXggPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXgiKTsKICAgICAgICAgICAgdGhpcy51c2VyLmJpcnRoZGF5ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYmlydGhkYXkiKTsKICAgICAgICAgICAgdGhpcy51c2VyTW9uZ28gPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJNb25nbyIpKTsKICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImJpcnRoZGF5IikgPT0gbnVsbCkgdGhpcy51c2VyLmJpcnRoZGF5ID0gIjIwMDItMDMtMDMiCiAgICAgICAgICAgIHRoaXMuc2V4U3RyID0gdGhpcy5zZXgoKTsKCiAgICAgICAgfSwKICAgICAgICBzZXNzaW9uVXBkYXRlKCkgewogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJuYW1lIiwgdGhpcy51c2VyLm5hbWUpOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyTW9uZ28iLCBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXIudXNlck1vbmdvKSkKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic2V4IiwgdGhpcy51c2VyLnNleCk7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImJpcnRoZGF5IiwgdGhpcy51c2VyLmJpcnRoZGF5KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGUoKSB7CgogICAgICAgICAgICBpZiAodGhpcy5iaXJ0aHJpZ2h0ICE9ICIiKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRoaXMuYmlydGhyaWdodCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub25hZ2UoZGF0ZSkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi55Sf5pel5LiN56ym5ZCI5p2h5Lu25oiW5pyq5ruhMTjlkajlsoEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmJpcnRocmlnaHQ9IiI7CiAgICAgICAgICAgICAgICB0aGlzLmJhc2ljX2ZsYWc9ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXIuYmlydGhkYXkgPSB0aGlzLmJpcnRoX2Zvcm1hdChkYXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4OC91c2VyL3VwZGF0ZSc7CiAgICAgICAgICAgIGxldCB1c2VyID0gdGhpcy51c2VyOwogICAgICAgICAgICBpZih1c2VyLnBob25lLmxlbmd0aCE9MTEpewogICAgICAgICAgICAgICAgdGhpcy5lcnJvcm1lc3NhZ2UucGhvbmUuZmxhZz10cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7CgogICAgICAgICAgICBheGlvcy5wb3N0KHVybCwgdXNlcikudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09PSAiZXJyb3IiICYmdXNlci5uYW1lIT10aGlzLm5ld25hbWUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ybWVzc2FnZS5uYW1lLmZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmdlbmVyYXRvcigpOyAvLyDlm57muq8KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCByZXNwb25zZS5kYXRhID09PSAiZXJyb3JQaG9uZSImJnVzZXIucGhvbmUhPXRoaXMubmV3cGhvbmUpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JtZXNzYWdlLnBob25lLmZsYWc9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3cGhvbmU9dXNlci5waG9uZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld25hbWU9dXNlci5uYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JtZXNzYWdlLm5hbWUuZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JtZXNzYWdlLnBob25lLmZsYWc9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uVXBkYXRlKCk7CgogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4aW9zLnBvc3QodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzID09ICJzdWNjZXNzIikgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGJhc2ljKCkgewogICAgICAgICAgICBpZiAodGhpcy5iYXNpY19mbGFnKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLmVycm9ybWVzc2FnZS5waG9uZS5mbGFnPT10cnVlfHx0aGlzLmVycm9ybWVzc2FnZS5uYW1lLmZsYWcgPT10cnVlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0aGlzLmJpcnRocmlnaHQhPSIiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmJhc2ljX2ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WQr+eUqOe8lui+ke+8gScpOwogICAgICAgICAgICAgICAgdGhpcy5uZXduYW1lPXRoaXMudXNlci5uYW1lOwogICAgICAgICAgICAgICAgdGhpcy5uZXdwaG9uZT10aGlzLnVzZXIucGhvbmU7CiAgICAgICAgICAgICAgICB0aGlzLmJhc2ljX2ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbnRhY3QoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhY3RfZmxhZykgewogICAgICAgICAgICAgICAgaWYodGhpcy5lcnJvcm1lc3NhZ2UucGhvbmUuZmxhZz09dHJ1ZXx8dGhpcy5lcnJvcm1lc3NhZ2UubmFtZS5mbGFnID09dHJ1ZSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0X2ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WQr+eUqOe8lui+ke+8gScpOwogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0X2ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKCiAgICB9Cn0K"},{"version":3,"sources":["information.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"information.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"extern\">\n        <el-card shadow=\"hover\">\n            <div>\n                <div class=\"basic\">\n                    <div class=\"basic-header\">\n                        <div class=\"basic-header-left\">\n                            基本信息\n                        </div>\n                        <div class=\"basic-header-divider\">\n                            <el-divider direction=\"horizontal\"></el-divider>\n                        </div>\n                        <div class=\"basic-header-btn\" v-if=\"basic_flag === true\">\n                            <el-button size=\"mini\" type=\"plain\" round @click=\"basic\">保存</el-button>\n\n                        </div>\n                        <div class=\"basic-header-btn\" v-else>\n                            <el-button size=\"mini\" type=\"plain\" round @click=\"basic\">编辑</el-button>\n                        </div>\n                    </div>\n\n                    <div class=\"basic-info\">\n                        <el-form ref=\"form\" :model=\"user\" label-width=\"80px\">\n                            <el-form-item label=\"昵称\">\n                                <div v-if=\"basic_flag === true\">\n                                    <el-input v-model=\"user.name\" size=\"mini\" style=\"width: 40%\"\n                                              @input=\"update\"></el-input>\n                                    <span style=\"color: red\" v-show=\"this.errormessage.name.flag\">{{this.errormessage.name.message}}</span>\n                                </div>\n                                <div v-else>\n                                    <span style=\"float: left\" class=\"span-text\">{{user.name}}</span>\n                                </div>\n                            </el-form-item>\n                            <el-form-item label=\"性别\">\n                                <div v-if=\"basic_flag === true\">\n                                    <el-dropdown style=\"margin-left: 10%\" trigger=\"click\">\n                                        <span class=\"el-dropdown-link\">\n                                            {{sex()}}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                                        </span>\n                                        <el-dropdown-menu slot=\"dropdown\" style=\"width: 100px;margin-left: 100px\">\n                                            <span v-on:click=\"()=>{this.user.sex='1'}\"><el-dropdown-item id=\"nan\">男</el-dropdown-item></span>\n                                            <span v-on:click=\"()=>{this.user.sex='0'}\"><el-dropdown-item id=\"nv\">女</el-dropdown-item></span>\n                                        </el-dropdown-menu>\n                                    </el-dropdown>\n                                </div>\n                                <div v-else>\n                                    <span style=\"float: left\" class=\"span-text\">{{sex()}}</span>\n                                </div>\n                            </el-form-item>\n                            <el-form-item label=\"年龄\">\n                                <div>\n                                    <span style=\"float: left\" class=\"span-text\">{{age()}}</span>\n                                </div>\n                            </el-form-item>\n                            <el-form-item label=\"生日\">\n                                <div v-if=\"basic_flag === true\">\n                                    <el-date-picker\n                                            v-model=\"birthright\"\n                                            type=\"date\"\n                                            size=\"middle\"\n                                            format=\"yyyy-MM-dd\"\n                                            placeholder=\"请选择生日\"\n                                            clear-icon=\"none\"\n                                            style=\"text-align: left\"\n                                    >\n                                    </el-date-picker>\n                                </div>\n                                <div v-else>\n                                    <span style=\"float: left\" class=\"span-text\">{{user.birthday}}</span>\n                                </div>\n                            </el-form-item>\n                            <el-form-item label=\"注册时间\">\n                                <div>\n                                    <span style=\"float: left\" class=\"span-text\">{{user.reg_time}}</span>\n                                </div>\n                            </el-form-item>\n                        </el-form>\n                    </div>\n                </div>\n                <div class=\"contact\">\n                    <div class=\"contact-header\">\n                        <div class=\"contact-header-left\">\n                            联系信息\n                        </div>\n                        <div class=\"contact-header-divider\">\n                            <el-divider direction=\"horizontal\"></el-divider>\n                        </div>\n                        <div class=\"contact-header-btn\" v-if=\"contact_flag === true\">\n                            <el-button size=\"mini\" type=\"plain\" round @click=\"contact\">保存</el-button>\n                        </div>\n                        <div class=\"contact-header-btn\" v-else>\n                            <el-button size=\"mini\" type=\"plain\" round @click=\"contact\">编辑</el-button>\n                        </div>\n                    </div>\n\n                    <div class=\"contact-info\">\n                        <el-form ref=\"form\" :model=\"user\" label-width=\"80px\">\n                            <el-form-item label=\"常用邮箱\">\n                                <div v-if=\"contact_flag === true\">\n                                    <el-input v-model=\"user.email\" size=\"mini\"></el-input>\n                                </div>\n                                <div v-else>\n                                    <span style=\"float: left\" class=\"span-text\">{{user.email}}</span>\n                                </div>\n                            </el-form-item>\n                            <el-form-item label=\"手机号码\">\n                                <div v-if=\"contact_flag === true\">\n                                    <el-input v-model=\"user.phone\" size=\"mini\" @input=\"update\"></el-input>\n                                    <span style=\"color: red\" v-show=\"this.errormessage.phone.flag\">{{this.errormessage.phone.message}}</span>\n\n                                </div>\n                                <div v-else>\n                                    <span style=\"float: left\" class=\"span-text\">{{user.phone}}</span>\n                                </div>\n                            </el-form-item>\n                        </el-form>\n                    </div>\n                </div>\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n\n    export default {\n        data() {\n            return {\n                basic_flag: false,\n                contact_flag: false,\n                newname:\"\",\n                newphone:\"\",\n                birthright:\"\",\n                sexStr: '未知',\n                errormessage: {\n                    name: {\n                        message: \"该用户重复或格式不正确\",\n                        flag: false\n                    },\n                    phone: {\n                        message: \"电话号码格式不正确或重复\",\n                        flag: false\n                    },\n\n                },\n                user: {\n                    id: 0,\n                    name: '交通大学',\n                    birthday: '1896-04-07',\n                    sex: -1,\n                    reg_time: '2020-07-09',\n                    email: 'se128@sjtu.edu.cn',\n                    phone: '021-34200000',\n                    userMongo: {}\n                }\n            }\n        },\n        created() {\n            this.generator();\n        },\n        methods: {\n            sex() {\n                switch (this.user.sex) {\n                    case \"1\":\n                        return \"男\";\n                    case \"0\":\n                        return \"女\";\n                    case \"-1\":\n                        return \"未知\";\n                    default:\n                        return \"未知\";\n                }\n            },\n            sexStrToNum() {\n                if (this.sexStr === \"男\") {\n                    this.user.sex = \"1\";\n                    return true;\n                }\n\n                if (this.sexStr === \"女\") {\n                    this.user.sex = \"0\";\n                    return true;\n                }\n\n                this.user.sex = \"-1\";\n                return false\n            },\n            nonage(date) { // 判断是否满14周岁\n                let curr = new Date();\n                if((curr.getFullYear()-date.getFullYear()>14 )\n                    || (curr.getFullYear() - date.getFullYear() === 14)\n                    && (curr.getMonth() > date.getMonth()\n                        || (curr.getMonth() === date.getMonth() && curr.getDate()>date.getDate())))\n                    return true;\n                else\n                    return false;\n            },\n            birth_format(date) {\n                let birth = date.getFullYear() + '-';\n                if (date.getMonth() < 9)\n                    birth += '0';\n                let month=date.getMonth()+1;\n                birth += (month+ '-');\n\n                if (date.getDate() < 10)\n                    birth += '0';\n\n                return (birth + date.getDate());\n            },\n            age() {\n                let date = new Date();\n                let year = Number(this.user.birthday.substr(0, 4));\n                return date.getFullYear() - year;\n            },\n            generator() {\n                this.user.id = sessionStorage.getItem(\"id\");\n                this.user.name = sessionStorage.getItem(\"name\");\n                this.user.reg_time = sessionStorage.getItem(\"reg_time\");\n                this.user.phone = sessionStorage.getItem(\"phone\");\n                this.user.sex = sessionStorage.getItem(\"sex\");\n                this.user.birthday = sessionStorage.getItem(\"birthday\");\n                this.userMongo = JSON.parse(sessionStorage.getItem(\"userMongo\"));\n                if (sessionStorage.getItem(\"birthday\") == null) this.user.birthday = \"2002-03-03\"\n                this.sexStr = this.sex();\n\n            },\n            sessionUpdate() {\n                sessionStorage.setItem(\"name\", this.user.name);\n                sessionStorage.setItem(\"userMongo\", JSON.stringify(this.user.userMongo))\n                sessionStorage.setItem(\"sex\", this.user.sex);\n                sessionStorage.setItem(\"birthday\", this.user.birthday);\n                return true;\n            },\n            update() {\n\n                if (this.birthright != \"\") {\n                    let date = new Date(this.birthright);\n                    if (this.nonage(date) === false) {\n                        this.$message.error(\"生日不符合条件或未满18周岁\");\n                        return false;\n                    }\n                    this.birthright=\"\";\n                    this.basic_flag=false;\n                    this.user.birthday = this.birth_format(date);\n                }\n                let url = 'http://localhost:8088/user/update';\n                let user = this.user;\n                if(user.phone.length!=11){\n                    this.errormessage.phone.flag=true;\n                    return;\n                }\n\n\n                console.log(user);\n\n                axios.post(url, user).then((response) => {\n                    if (response.data === \"error\" &&user.name!=this.newname) {\n                        this.errormessage.name.flag = true;\n                        return;\n                        // this.generator(); // 回溯\n                    }\n                    if( response.data === \"errorPhone\"&&user.phone!=this.newphone){\n                        this.errormessage.phone.flag=true;\n                        return;\n                    }\n\n\n                        console.log(response.data)\n                        this.newphone=user.phone;\n                        this.newname=user.name;\n                        this.errormessage.name.flag = false;\n                        this.errormessage.phone.flag=false;\n                        this.sessionUpdate();\n\n                }).catch(err => {\n                    console.log(err);\n                });\n                return this.axios.post(url).then(res => {\n                    if (res == \"success\") return true;\n                    else return false;\n                })\n            },\n            basic() {\n                if (this.basic_flag) {\n                    if(this.errormessage.phone.flag==true||this.errormessage.name.flag ==true){\n                        return;\n                    }\n                    if(this.birthright!=\"\") {\n                        this.update();\n                    }\n\n                    this.basic_flag = false;\n                    this.update();\n                    return false;\n                } else {\n                    this.$message.success('启用编辑！');\n                    this.newname=this.user.name;\n                    this.newphone=this.user.phone;\n                    this.basic_flag = true;\n                    return true;\n                }\n            },\n            contact() {\n                if (this.contact_flag) {\n                    if(this.errormessage.phone.flag==true||this.errormessage.name.flag ==true){\n                        return;\n                    }\n                    this.contact_flag = false;\n                    this.update();\n                    return false;\n                } else {\n                    this.$message.success('启用编辑！');\n                    this.contact_flag = true;\n                    return true;\n                }\n            },\n\n\n        }\n    }\n</script>\n\n<style scoped>\n    .extern {\n        width: 100%;\n        flex-direction: column;\n    }\n\n    .basic {\n        width: 100%;\n    }\n\n    .basic-header {\n        width: 100%;\n    }\n\n    .basic-header-left {\n        width: 15%;\n        float: left;\n        margin-bottom: -10px;\n    }\n\n    .basic-header-divider {\n        width: 70%;\n        float: left;\n        height: 20px;\n        margin-bottom: -10px;\n    }\n\n    .basic-header-btn {\n        width: 15%;\n        float: left;\n    }\n\n    .basic-info {\n        width: 80%;\n        margin-left: 3%;\n    }\n\n    .contact {\n        width: 100%;\n    }\n\n    .contact-header {\n        width: 100%;\n    }\n\n    .contact-header-left {\n        width: 15%;\n        float: left;\n        margin-bottom: -10px;\n    }\n\n    .contact-header-divider {\n        width: 70%;\n        float: left;\n        height: 20px;\n        margin-bottom: -10px;\n    }\n\n    .contact-header-btn {\n        width: 15%;\n        float: left;\n    }\n\n    .contact-info {\n        width: 80%;\n        margin-left: 3%;\n    }\n</style>\n"]}]}