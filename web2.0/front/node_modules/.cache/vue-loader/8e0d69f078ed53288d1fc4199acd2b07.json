{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/blog.vue?vue&type=style&index=0&id=487a4dba&scoped=true&lang=css&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/blog.vue","mtime":1595481640648},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/css-loader/dist/cjs.js","mtime":1594082400206},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594082401315},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/postcss-loader/src/index.js","mtime":1594082403147},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmV4dGVybiB7CiAgICB3aWR0aDogMTAwJTsKICAgIGRpc3BsYXk6IGZsZXg7Cn0KCi5ibG9nIHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLXRvcDogLTEwcHg7Cn0KCi5hdmF0YXIgewogICAgZmxvYXQ6IGxlZnQ7CiAgICB3aWR0aDogNyU7Cn0KCi5jb250YWluZXIgewogICAgbWFyZ2luLWxlZnQ6IDIlOwogICAgZmxvYXQ6IGxlZnQ7CiAgICB3aWR0aDogODUlOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KCi5oZWFkZXIgewogICAgd2lkdGg6IDEwMCU7Cn0KCi5uYW1lIHsKICAgIGZsb2F0OiBsZWZ0OwogICAgd2lkdGg6IDEwMCU7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgoudGltZXN0YW1wIHsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICBjb2xvcjogZGFya2dyYXk7CiAgICBmb250LXNpemU6IDEwcHg7Cn0KCi5jb250ZW50IHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLXRvcDogNSU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCk7Cn0KCi5tZW51aXRlbSB7Cn0KCi50ZXh0IHsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KCi5pbWcgewogICAgd2lkdGg6IDE1MHB4OwogICAgaGVpZ2h0OiAxNTBweDsKICAgIGZsb2F0OiBsZWZ0OwogICAgbWFyZ2luLWxlZnQ6IDElOwogICAgbWFyZ2luLXRvcDogMSU7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBvYmplY3QtZml0OiBjb3ZlcjsKfQoKLmJpZy1pbWcgewogICAgd2lkdGg6IDEwMCU7Cn0KCi5mb290ZXIgewogICAgYm9yZGVyLXRvcDogMnB4ICM5MDkzOTk7CiAgICBtYXJnaW4tdG9wOiAyMHB4Owp9Cg=="},{"version":3,"sources":["blog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"blog.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div style=\"width: 100%\">\n        <el-card class=\"extern\" shadow=\"hover\" style=\"background: red\">\n            <div class=\"blog\" style=\"background: blue;width: 100%\">\n                <div class=\"avatar\">\n                    <el-avatar :src=\"data.userAvatar\"></el-avatar>\n                </div>\n\n                <div class=\"container\">\n                    <div class=\"header\" style=\"z-index: 998;\">\n                        <el-row style=\"height: 20px\">\n                            <el-col :span=\"20\">\n                                <div class=\"name\">\n                                    <el-button type=\"text\" style=\"float: left\" @click=\"visit\">{{generator(data)}}</el-button>\n                                </div>\n                                <div class=\"timestamp\">{{blog.post_day}}</div>\n                                <div class=\"timestamp\">当前可见：{{parseType2Str()}}</div>\n                            </el-col>\n\n                            <el-col :span=\"3\" style=\"float: right\">\n                                <div>\n                                    <el-dropdown trigger=\"click\" style=\"outline: none\">\n                                    <span\n                                            class=\"el-dropdown-link btn send time-send small-hand\"\n                                            id=\"custom-send-btn\"\n                                    >选项<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                                    </span>\n\n                                        <el-dropdown-menu slot=\"dropdown\" style=\"width: 12%\">\n\n                                            <p v-on:click=\"option(0)\" class=\"menuitem\" v-if=\"blog.type !== 0\">\n                                                <el-dropdown-item >设置权为私密</el-dropdown-item>\n                                            </p>\n\n                                            <p v-on:click=\"option(3)\" class=\"menuitem\" v-if=\"blog.type !== 3\">\n                                                <el-dropdown-item>设置为所有人可见</el-dropdown-item>\n                                            </p>\n\n                                            <p v-on:click=\"option(1)\" class=\"menuitem\" v-if=\"blog.type !== 1\">\n                                                <el-dropdown-item>设置为好友可见</el-dropdown-item>\n                                            </p>\n\n                                            <p v-on:click=\"option(2)\" class=\"menuitem\" v-if=\"this.$root.is_superuser === true\">\n                                                <el-dropdown-item>删除</el-dropdown-item>\n                                            </p>\n\n                                        </el-dropdown-menu>\n\n                                    </el-dropdown>\n                                </div>\n\n                            </el-col>\n                        </el-row>\n                    </div>\n\n                    <div class=\"content\" style=\"z-index: 998;\">\n                        <div class=\"text\">\n                            {{blogMongo.content}}\n                        </div>\n                        <div class=\"images\" v-if=\"blogMongo.images !== null\">\n                            <ul>\n                                <li style=\"\" v-for=\"image in data.blogMongo.images\" :key=\"image\">\n                                    <img @click=\"maxPic(image)\" :src=\"parseBase64(image)\" class=\"img\" style=\"z-index: 998\"/>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"footer\" style=\"text-align: center\">\n                    <el-row>\n                        <el-col :span=\"6\">\n                            <div v-if=\"collect_flag === true\">\n                                <el-button type=\"text\" icon=\"el-icon-folder-remove\" @click=\"collect\">{{blog.coll_number}}\n                                </el-button>\n                            </div>\n                            <div v-else>\n                                <el-button type=\"text\" icon=\"el-icon-folder-add\" @click=\"collect\">{{blog.coll_number}}\n                                </el-button>\n                            </div>\n                        </el-col>\n                        <el-col :span=\"6\">\n                            <el-button type=\"text\" icon=\"el-icon-top-right\" @click=\"share\">{{blog.reblog}}</el-button>\n                        </el-col>\n                        <el-col :span=\"6\">\n                            <el-button type=\"text\" icon=\"el-icon-chat-dot-square\" @click=\"comment\">\n                                {{blog.com_number}}\n                            </el-button>\n                        </el-col>\n                        <el-col :span=\"6\">\n                            <div v-if=\"like_flag === true\">\n                                <el-button type=\"text\" icon=\"el-icon-star-on\" @click=\"like\">{{blog.like}}</el-button>\n                            </div>\n                            <div v-else>\n                                <el-button type=\"text\" icon=\"el-icon-star-off\" @click=\"like\">{{blog.like}}</el-button>\n                            </div>\n                        </el-col>\n                    </el-row>\n\n                    <el-dialog :append-to-body=\"true\" :visible.sync=\"share_flag\" width=\"40%\" :show-close=\"false\"\n                               title=\"转发动态到\">\n                        <share :id=\"blog.id\" :user=\"blog.username\" :content=\"blogMongo.content\"\n                               @change=\"change\"></share>\n                    </el-dialog>\n                    <el-dialog :visible.sync=\"dialogVisible\" width=\"40%\" :show-close=\"false\" :append-to-body=\"true\"\n                               style=\"z-index: 999\">\n                        <el-image :src=\"this.showpic\" class=\"big-img\"></el-image>\n                    </el-dialog>\n\n                    <el-dialog :append-to-body=\"true\" :visible.sync=\"comment_flag\" width=\"60%\" :show-close=\"false\">\n                        <release_comment></release_comment>\n                        <comment></comment>\n                    </el-dialog>\n                </div>\n            </div>\n        </el-card>\n    </div>\n\n</template>\n\n<script>\n    import axios from 'axios';\n\n    import share from '../components/share';\n    import comment from \"./comment\";\n    import release_comment from \"./release_comment\";\n\n    export default {\n        components: {\n            share, comment, release_comment\n        },\n        props: {\n            data: Object\n        },\n        data() {\n            return {\n                blog: {},\n                blogMongo: {},\n                comments: [],\n                reblog: {},\n                reblogMongo: {},\n                dialogVisible: false,\n                showpic: \"\",\n\n                like_num: 0,\n                like_flag: false,\n                collect_num: 0,\n                collect_flag: false,\n                share_num: 0,\n                share_flag: false,\n                comment_num: 0,\n                comment_flag: false\n            }\n        },\n        methods: {\n            // 拉取数据\n            generator(val) {\n                this.blog = val.blog;\n                this.blogMongo = val.blogMongo;\n                this.comments = val.comments;\n                this.comment_num = this.comments.length;\n\n                console.log(val);\n                console.log(\"nmsl\")\n                console.log(this.blog);\n                return val.blog.username;\n            },\n            parseBase64(image) {\n                return JSON.parse(image).base64;\n            },\n            parseType2Str() {\n                switch (this.blog.type) {\n                    case 0:\n                        return '仅自己可见';\n                    case 1:\n                        return '粉丝可见';\n                    case 3:\n                        return '公开可见';\n                }\n            },\n            option(op) {\n                switch (op) {\n                    case 0: case 1: case 3:\n                        this.blog.type = op;\n                        break;\n                    case 2:\n                        this._delete();\n                        break;\n                    default:\n                        break;\n                }\n            },\n            _delete() {\n                let url = 'http://localhost:8088/blog/removeBlog?'\n                + 'uid=' + sessionStorage.getItem(\"id\")\n                + '&bid=' + this.blog.id\n                + '&type=' + this.blog.type;\n\n                axios.get(url).then((response) =>{\n                    if (response.data === true) {\n                        this.$message.success('删除成功！');\n                        window.location.reload();\n                    }\n\n                    else\n                        this.$message.error('没有权限删除！');\n                });\n            },\n            share() {\n                if (this.$root.logged === false) {\n                    this.$message.info(\"请登录后再进行操作\");\n                    return false;\n                }\n\n                this.share_flag = true;\n                return true;\n            },\n            change() {\n                this.share_flag = false;\n                return true;\n            },\n            collect() {\n                if (this.$root.logged === false) {\n                    this.$message.info(\"请登录后再进行操作\");\n                    return false;\n                }\n                if (this.collect_flag) {\n                    this.$message.error('取消收藏！');\n                    this.blog.coll_number--;\n                    this.collect_flag = false;\n                    return false;\n                } else {\n                    this.$message.success('收藏成功！');\n                    this.collect_flag = true;\n                    this.blog.coll_number++;\n                    return true;\n                }\n            },\n            like() {\n                if (this.$root.logged === false) {\n                    this.$message.info(\"请登录后再进行操作\");\n                    return false;\n                }\n                if (this.like_flag) {\n                    this.$message.error('取消赞！');\n                    this.like_flag = false;\n                    this.blog.like--;\n                    return false;\n                } else {\n                    this.$message.success('点赞成功！');\n                    this.like_flag = true;\n                    // 实际使用的时候不能用flag，否则一刷新就会重新能点赞，应该跟用户是否对这条动态点赞绑定\n                    this.blog.like++;\n                    return true;\n                }\n            },\n            visit() {\n                this.$message.success(\"跳转\")\n                this.$router.push('/visit');\n            },\n            maxPic(image) {\n                this.dialogVisible = true;\n                this.showpic = JSON.parse(image).base64;\n                return true;\n            },\n            comment() {\n                if (this.$root.logged === false) {\n                    this.$message.info(\"请登录后再进行操作\");\n                    return false;\n                }\n                this.comment_flag = true;\n                return true;\n            },\n\n        },\n    }\n</script>\n\n<style scoped>\n    .extern {\n        width: 100%;\n        display: flex;\n    }\n\n    .blog {\n        width: 100%;\n        margin-top: -10px;\n    }\n\n    .avatar {\n        float: left;\n        width: 7%;\n    }\n\n    .container {\n        margin-left: 2%;\n        float: left;\n        width: 85%;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .header {\n        width: 100%;\n    }\n\n    .name {\n        float: left;\n        width: 100%;\n        text-align: left;\n    }\n\n    .timestamp {\n        text-align: left;\n        color: darkgray;\n        font-size: 10px;\n    }\n\n    .content {\n        width: 100%;\n        margin-top: 5%;\n        background: rgba(255, 255, 255, 0.4);\n    }\n\n    .menuitem {\n    }\n\n    .text {\n        text-align: left;\n    }\n\n    .img {\n        width: 150px;\n        height: 150px;\n        float: left;\n        margin-left: 1%;\n        margin-top: 1%;\n        cursor: pointer;\n        object-fit: cover;\n    }\n\n    .big-img {\n        width: 100%;\n    }\n\n    .footer {\n        border-top: 2px #909399;\n        margin-top: 20px;\n    }\n</style>\n"]}]}