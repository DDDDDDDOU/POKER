{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/comment.vue?vue&type=style&index=0&id=a0559e02&scoped=true&lang=css&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/comment.vue","mtime":1598592890398},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/css-loader/dist/cjs.js","mtime":1594082400206},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594082401315},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/postcss-loader/src/index.js","mtime":1594082403147},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmF2YXRhciB7CiAgICBmbG9hdDogbGVmdDsKICAgIHdpZHRoOiA4JTsKfQoKLmNvbnRlbnQgewogICAgd2lkdGg6IDgwJTsKICAgIGZsb2F0OiBsZWZ0OwogICAgbWFyZ2luLWxlZnQ6IDUlOwogICAgY29sb3I6IGJsYWNrOwp9CgouZG93biB7CiAgICBmbG9hdDogcmlnaHQ7CiAgICB3aWR0aDogMTAlOwp9CgouY29tYXZhIHsKICAgIGZsb2F0OiBsZWZ0OwogICAgbWFyZ2luLWxlZnQ6IDMlOwogICAgbWFyZ2luLWJvdHRvbTogMTAlOwp9CgouY29uIHsKICAgIGNsZWFyOiBib3RoOwp9CgouY29uMiB7CiAgICBtYXJnaW4tYm90dG9tOiA1JTsKIH0KCi5pY29ucyB7CiAgICBjbGVhcjogYm90aDsKfQoKLmNvbnRlbnQtdGV4dDEgewogICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIGZsb2F0OiBsZWZ0OwogICAgY29sb3I6IGRvZGdlcmJsdWU7Cn0KCi5jb250ZW50LXRleHQyIHsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICBmbG9hdDogbGVmdDsKfQoKLmljb24xIHsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICBmbG9hdDogbGVmdDsKICAgIG1hcmdpbi10b3A6MS41JTsKICAgIGNvbG9yOiBkYXJrZ3JheTsKICAgIGZvbnQtc2l6ZTogMTJweDsKfQoKLmljb24yIHsKICAgIGZsb2F0OiByaWdodDsKICAgIHRleHQtYWxpZ246IHJpZ2h0Owp9CgoucmUtY29tbWVudCB7CiAgICBjbGVhcjogYm90aDsKICAgIHdpZHRoOiAxMDAlOwp9CgoucmVwbHkgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2VhZWFlYzsKICAgIHdpZHRoOiAxMDAlOwp9CgouY29udGVudC10ZXh0NCB7CiAgICB3aWR0aDogMTAwJTsKICAgIHdvcmQtYnJlYWs6YnJlYWstYWxsOwogICAgZmxvYXQ6IGxlZnQ7CiAgICBkaXNwbGF5OiBmbGV4Owp9CgoubW9yZS1idXR0b24gewogICAgd2lkdGg6IDEwMCU7Cn0KCi5jb20gewogICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmNTsKfQoKLmNvbnRlbnQtdGV4dDUgewogICAgZmxvYXQ6IGxlZnQ7CiAgICBtYXJnaW4tdG9wOiAxM3B4OwogICAgY29sb3I6IGRhcmtncmF5OwogICAgZm9udC1zaXplOiAxMHB4Owp9Cg=="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-card class=\"com\" shadow=\"hover\">\n\n        <div class=\"avatar\">\n            <el-avatar class=\"comava\" shape=\"square\" :size=\"50\" :src=\"data.avatar\"></el-avatar>\n        </div>\n\n        <div>\n            <div class=\"content\">\n\n                <div class=\"con\">\n                    <p class=\"content-text1\">{{data.username}}</p>\n                    <p class=\"content-text2\"> : {{data.content}}</p>\n                </div>\n\n                <div class=\"icons\">\n                    <el-row>\n                        <el-col class=\"icon1\" :span=\"6\">\n                            <p>{{data.post_time}}</p>\n                        </el-col>\n\n                        <el-col class=\"icon2\" :span=\"6\">\n                            <el-button type=\"text\" icon=\"el-icon-chat-dot-square\" @click=\"feedback(-1)\">回复</el-button>\n                        </el-col>\n                        <el-col class=\"icon2\" :span=\"6\">\n                            <el-button type=\"text\" icon=\"el-icon-star-off\" @click=\"like\">喜欢</el-button>\n                        </el-col>\n                        <el-col class=\"icon2\" :span=\"6\">\n                            <div v-if=\"delete_flag === true\">\n                                <el-button type=\"text\" icon=\"el-icon-delete\" @click=\"remove(data.cid)\">删除</el-button>\n                            </div>\n\n                            <div v-else>\n                                <p style=\"color: #f2f2f5\">占位置</p>\n                            </div>\n                        </el-col>\n                    </el-row>\n                </div>\n\n                <release v-if=\"reply_flag === true\" :type=\"1\" :bid=\"data.bid\" :to_uid=\"data.uid\" :to_username=\"data.username\" :comment=\"data\"></release>\n\n                <div class=\"re-comment\">\n                    <div class=\"con2\" v-if=\"show_flag === 0 || show_flag === 2\">\n                        <ul><li style=\"clear: both\" v-for=\"(reply, index) in replies\" :key=\"reply.cid\">\n                            <div class=\"reply\">\n                                <div class=\"content-text4\" style=\"margin-left: 5px; margin-top: 5px\">\n                                    <el-button type=\"text\" size=\"mini\" style=\"font-size: 14px; margin-top: -6px; z-index: 999\" @click=\"visit(reply.uid)\">{{reply.username}}</el-button> : {{displayReplyContent(reply)}}\n                                </div>\n\n                                <div style=\"margin-left: 5px\">\n                                    <el-row>\n                                        <el-col :span=\"18\">\n                                            <p class=\"content-text5\">{{reply.post_time}}</p>\n                                        </el-col>\n                                        <el-col :span=\"3\">\n                                            <div v-if=\"reply.delete_flag === true\">\n                                                <el-button icon=\"el-icon-delete\" type=\"text\" @click=\"remove(reply.cid)\" style=\"z-index: 999\">删除</el-button>\n                                                <el-divider direction=\"vertical\"></el-divider>\n                                            </div>\n                                            <div v-else>\n                                                <p style=\"color: #eaeaec\">占位置</p>\n                                            </div>\n                                        </el-col>\n                                        <el-col :span=\"3\">\n                                            <el-button icon=\"el-icon-chat-dot-square\" type=\"text\" @click=\"feedback(index)\" style=\"z-index: 999\">回复</el-button>\n                                        </el-col>\n                                    </el-row>\n                                </div>\n\n                                <release v-if=\"reply.flag === true\" :type=\"1\" :bid=\"reply.bid\" :to_uid=\"reply.uid\" :to_username=\"reply.username\" :comment=\"reply\"></release>\n                            </div>\n                        </li></ul>\n                    </div>\n\n                    <div class=\"more-button\">\n                        <el-row>\n                            <el-col :span=\"12\">\n                                <div v-if=\"show_flag === 1\">\n                                    <el-button type=\"text\" @click=\"showMore\" style=\"z-index: 999\">共{{size}}条回复，查看更多 >></el-button>\n                                </div>\n                            </el-col>\n                            <el-col :span=\"12\">\n                                <div v-if=\"show_flag === 2\">\n                                    <el-button type=\"text\" @click=\"showMore\"> >> 收起</el-button>\n                                </div>\n                            </el-col>\n                        </el-row>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </el-card>\n</template>\n\n<script>\n    import axios from 'axios';\n    import release from \"./release_comment\";\n\n    export default {\n        components: {\n            release\n        },\n        props: {\n            bid: Number,\n            to_uid: Number,\n            data: Object\n        },\n        data() {\n            return {\n                replies: [],\n                size: 0,\n                reply_flag: false,\n                delete_flag: false,\n                show_flag: 0\n            }\n        },\n        created() {\n            this.delete_flag = (this.$root.auth_comment_manager === true || this.$props.data.uid === Number(sessionStorage.getItem(\"id\")));\n\n            let cid = this.$props.data.cid;\n            let tmp = JSON.parse(sessionStorage.getItem(\"comments\"));\n            for (let i = 0; i < tmp.length; ++i) {\n                if (tmp[i].root_cid === cid) {\n                    tmp[i].flag = false;\n                    tmp[i].delete_flag = (this.$root.auth_comment_manager === true || tmp[i].uid === Number(sessionStorage.getItem(\"id\")));\n                    this.replies.push(tmp[i]);\n                }\n            }\n\n            this.size = this.replies.length;\n            if (this.size > 5)\n                this.show_flag = 1;\n        },\n\n        methods: {\n            displayReplyContent(reply){\n                if (reply.to_cid !== this.$props.data.cid)\n                    return '回复@' + reply.to_username + ':' + reply.content;\n                else\n                    return reply.content;\n            },\n            feedback(type) {\n                if (type === -1)\n                    this.reply_flag = (this.reply_flag !== true);\n                else\n                    this.replies[type].flag = (this.replies[type].flag !== true);\n            },\n            like() {\n                this.$message.info('暂不支持');\n            },\n            remove(cid) {\n                let url = 'http://localhost:8088/blog/removeComment?uid=' + sessionStorage.getItem(\"id\")\n                 + '&cid=' + cid\n                 + '&type=' + sessionStorage.getItem(\"type\");\n\n                axios.post(url, {\n                    headers: {\n                        token: sessionStorage.getItem(\"token\")\n                    }\n                }).then(res => {\n                    if (res.data === true) {\n                        this.$message.success('删除评论成功！');\n                        this.$emit('change');\n                    }\n                    else\n                        this.$message.error('没有权限删除！');\n                }).catch(err =>{\n                    console.log(err);\n                });\n            },\n            showMore() {\n                if (this.show_flag === 1)\n                    this.show_flag = 2;\n                else if (this.show_flag === 2)\n                    this.show_flag = 1;\n            },\n            visit(uid) {\n                this.$router.push({\n                    path: '/visit',\n                    query: {\n                        id: uid\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .avatar {\n        float: left;\n        width: 8%;\n    }\n\n    .content {\n        width: 80%;\n        float: left;\n        margin-left: 5%;\n        color: black;\n    }\n\n    .down {\n        float: right;\n        width: 10%;\n    }\n\n    .comava {\n        float: left;\n        margin-left: 3%;\n        margin-bottom: 10%;\n    }\n\n    .con {\n        clear: both;\n    }\n\n    .con2 {\n        margin-bottom: 5%;\n     }\n\n    .icons {\n        clear: both;\n    }\n\n    .content-text1 {\n        text-align: left;\n        float: left;\n        color: dodgerblue;\n    }\n\n    .content-text2 {\n        text-align: left;\n        float: left;\n    }\n\n    .icon1 {\n        text-align: left;\n        float: left;\n        margin-top:1.5%;\n        color: darkgray;\n        font-size: 12px;\n    }\n\n    .icon2 {\n        float: right;\n        text-align: right;\n    }\n\n    .re-comment {\n        clear: both;\n        width: 100%;\n    }\n\n    .reply {\n        background-color: #eaeaec;\n        width: 100%;\n    }\n\n    .content-text4 {\n        width: 100%;\n        word-break:break-all;\n        float: left;\n        display: flex;\n    }\n\n    .more-button {\n        width: 100%;\n    }\n\n    .com {\n        background-color: #f2f2f5;\n    }\n\n    .content-text5 {\n        float: left;\n        margin-top: 13px;\n        color: darkgray;\n        font-size: 10px;\n    }\n</style>\n"]}]}