{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/personalcard.vue?vue&type=style&index=0&id=5924ad40&scoped=true&lang=css&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/personalcard.vue","mtime":1599316367489},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/css-loader/dist/cjs.js","mtime":1594082400206},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594082401315},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/postcss-loader/src/index.js","mtime":1594082403147},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmV4dGVybiB7CiAgICB3aWR0aDogMTAwJTsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KCi5iYWNrIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAzMDBweDsKICAgIGJhY2tncm91bmQ6IHVybCgiLi4vYXNzZXRzL2ltYWdlL3Bvc3Rlcl8xLnBuZyIpOwp9CgoucGljIHsKICAgIG1hcmdpbi10b3A6IDQwcHg7CiAgICB3aWR0aDogMTUwcHg7CiAgICBoZWlnaHQ6MTUwcHg7CiAgICBib3JkZXItcmFkaXVzOiA3NXB4OwogICAgY2xlYXI6IGJvdGg7Cn0KCi50ZXh0MSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBjbGVhcjogYm90aDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGZvbnQtc2l6ZTogeHgtbGFyZ2U7Cn0KCi50ZXh0MiB7CiAgICBjbGVhcjogYm90aDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGNvbG9yOiAjYzZjNmM2OwogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIG1hcmdpbi1sZWZ0OiAxMzBweDsKfQoKLnRleHQzIHsKICAgIGNsZWFyOiBib3RoOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6ICNjNmM2YzY7CiAgICBtYXJnaW4tdG9wOiAyMHB4Owp9CgoubWVudSB7CiAgICB3aWR0aDogNTAlOwp9Cgo="},{"version":3,"sources":["personalcard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"personalcard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"extern\">\n        <el-card style=\"width: 90%; text-align: center; margin-left: 5%\">\n                <div class=\"back\">\n                    <img class=\"pic\" v-bind:src=\"user.userMongo.avatar\" alt=\"picture\"/>\n                    <div class=\"text1\">\n                        {{user.name}}\n                    </div>\n                    <div class=\"text2\" v-if=\"this.update_flag === false\">\n                        <el-upload\n                                action='string'\n                                style=\"width: 80%;z-index: 998\"\n                                class=\"avatar-uploader\"\n                                :on-change=\"getFile\"\n                                :limit=\"1\"\n                                :auto-upload=\"false\"\n                                :show-file-list=\"false\"\n                                accept=\".jpg,.jpeg,.png\">\n                            <el-button size=\"mini\" type=\"plain\" icon=\"el-icon-upload\">上传头像</el-button>\n                        </el-upload>\n                    </div>\n\n                    <div v-if=\"this.update_flag === true\" class=\"text3\">\n                        <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-check\" @click=\"upload\"></el-button>\n                        <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-close\" @click=\"cancel\"></el-button>\n                    </div>\n                </div>\n                <el-menu class=\"el-menu-demo\" mode=\"horizontal\" default-active=\"1\">\n                    <el-menu-item class=\"menu\" index=\"1\">我的主页</el-menu-item>\n                    <el-menu-item class=\"menu\" index=\"2\">管理中心</el-menu-item>\n                </el-menu>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\";\n\n    export default {\n        data() {\n            return {\n                update_flag: false,\n                origin_avatar: '',\n                user: {\n                    id: 0,\n                    name: '交通大学',\n                    birthday: '1896-04-07',\n                    sex: -1,\n                    reg_time: '2020-07-01',\n                    phone: '021134200000',\n                    userMongo: {\n                        avatar: ''\n                    }\n                }\n            }\n        },\n        created() {\n            this.generator();\n        },\n        methods: {\n            generator() {\n                this.user.id = sessionStorage.getItem(\"id\");\n                if(this.user.id==null) this.user.id='123';\n                let url = 'http://localhost:8088/user/getPlainOne?id=' + this.user.id;\n\n                // axios.get(url, {\n                //     headers: {\n                //         token: sessionStorage.getItem(\"token\")\n                //     }\n                // }).then(res => {\n                //     this.user = res.data;\n                //     this.origin_avatar = this.user.userMongo.avatar;\n                // }).catch(err => {\n                //     console.log(err);\n                // });\n                return this.axios.post(url).then(res=>{\n                    return res === 'success';\n                });\n            },\n            getBase64(file) {\n                return new Promise(function (resolve, reject) {\n                    let reader = new FileReader();\n                    let imgResult = '';\n                    reader.readAsDataURL(file);\n                    reader.onload = function () {\n                        imgResult = reader.result;\n                    };\n                    reader.onerror = function (error) {\n                        reject(error);\n                    };\n                    reader.onloadend = function () {\n                        resolve(imgResult);\n                    };\n                });\n            },\n            getFile(file) {\n\n                this.getBase64(file.raw).then(res => {\n                    this.user.userMongo.avatar = res;\n                });\n\n                this.update_flag = true;\n                return true;\n            },\n            cancel() {\n                this.update_flag = false;\n                this.user.userMongo.avatar = this.origin_avatar;\n                return true;\n            },\n            upload() {\n                let url = 'http://localhost:8088/user/update';\n                console.log(url);\n\n                let form = this.user;\n                form.avatar = this.user.userMongo.avatar;\n\n                // axios.post(url, form, {\n                //     headers: {\n                //         token: sessionStorage.getItem(\"token\")\n                //     }\n                // }).then(res => {\n                //     if(res.data === 'success')\n                //         this.$message.success('更换头像成功！');\n                //     console.log(res.data);\n                // }).catch(err => {\n                //    console.log(err);\n                // });\n\n                this.update_flag = false;\n                return this.axios.post(url).then(res=>{\n                    return res === 'success';\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .extern {\n        width: 100%;\n        flex-direction: column;\n    }\n\n    .back {\n        width: 100%;\n        height: 300px;\n        background: url(\"../assets/image/poster_1.png\");\n    }\n\n    .pic {\n        margin-top: 40px;\n        width: 150px;\n        height:150px;\n        border-radius: 75px;\n        clear: both;\n    }\n\n    .text1 {\n        text-align: center;\n        clear: both;\n        color: white;\n        font-size: xx-large;\n    }\n\n    .text2 {\n        clear: both;\n        text-align: center;\n        color: #c6c6c6;\n        margin-top: 20px;\n        margin-left: 130px;\n    }\n\n    .text3 {\n        clear: both;\n        text-align: center;\n        color: #c6c6c6;\n        margin-top: 20px;\n    }\n\n    .menu {\n        width: 50%;\n    }\n\n</style>\n"]}]}