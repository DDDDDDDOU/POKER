{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/signupForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/signupForm.vue","mtime":1594821224865},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJTaWduVXBGb3JtIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZXJybWVzc2FnZToiIiwKICAgICAgICAgICAgcmVnaXN0ZXJGb3JtOiB7CiAgICAgICAgICAgICAgICBwaG9uZSAgICA6ICcnLAogICAgICAgICAgICAgICAgbmFtZSAgICAgOiAnJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkIDogJycsCiAgICAgICAgICAgICAgICBiaXJ0aGRheSA6ICcnLAogICAgICAgICAgICAgICAgdHlwZSAgICAgOiAwLCAvLyDpu5jorqTkuLrmma7pgJrnlKjmiLcKICAgICAgICAgICAgICAgIHNleCAgICAgIDogMSwgLy8g6buY6K6k5Li655S377yIMe+8iQogICAgICAgICAgICAgICAgYXZhdGFyOiB7CiAgICAgICAgICAgICAgICAgICAgYmFzZTY0OiAnaHR0cDovL2JwaWMuNTg4a3UuY29tL2VsZW1lbnRfcGljLzAxLzU1LzA5LzYzNTc0NzRkYmYyNDA5Yy5qcGcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbm9uYWdlKGRhdGUpIHsgLy8g5Yik5pat5piv5ZCm5ruhMTTlkajlsoEKICAgICAgICAgICAgbGV0IGN1cnIgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBpZigoY3Vyci5nZXRGdWxsWWVhcigpLWRhdGUuZ2V0RnVsbFllYXIoKT4xNCApfHwoY3Vyci5nZXRGdWxsWWVhcigpLWRhdGUuZ2V0RnVsbFllYXIoKT09MTQpJiYoY3Vyci5nZXRNb250aCgpID4gZGF0ZS5nZXRNb250aCgpfHwoY3Vyci5nZXRNb250aCgpPT1kYXRlLmdldE1vbnRoKCkmJmN1cnIuZ2V0RGF0ZSgpPmRhdGUuZ2V0RGF0ZSgpKSkpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBiaXJ0aF9mb3JtYXQoZGF0ZSkgewogICAgICAgICAgICBsZXQgYmlydGggPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLSc7CiAgICAgICAgICAgIGlmIChkYXRlLmdldE1vbnRoKCkgPCAxMCkKICAgICAgICAgICAgICAgIGJpcnRoICs9ICcwJzsKICAgICAgICAgICAgbGV0IG1vbnRoPWRhdGUuZ2V0TW9udGgoKSsxOwogICAgICAgICAgICBiaXJ0aCArPSAobW9udGgrICctJyk7CgogICAgICAgICAgICBpZiAoZGF0ZS5nZXREYXRlKCkgPCAxMCkKICAgICAgICAgICAgICAgIGJpcnRoICs9ICcwJzsKCiAgICAgICAgICAgIHJldHVybiAoYmlydGggKyBkYXRlLmdldERhdGUoKSk7CiAgICAgICAgfSwKICAgICAgICByZWdpc3RlcigpIHsKICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLnJlZ2lzdGVyRm9ybTsKICAgICAgICAgICAgbGV0IHBob25lID0gZm9ybS5waG9uZTsKICAgICAgICAgICAgaWYgKHBob25lLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJtZXNzYWdlPSLnlLXor53lj7fnoIHkuI3og73kuLrnqbohIjsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueUteivneWPt+eggeS4jeiDveS4uuepuiEiKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGV0IGZvcm1hdCA9IC9eKDFbMC05XXsxMH0pJC87CiAgICAgICAgICAgICAgICBpZiAoIWZvcm1hdC50ZXN0KHBob25lKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJybWVzc2FnZT0i55S16K+d5Y+356CB5qC85byP5LiN5q2j56GuISI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi55S16K+d5Y+356CB5qC85byP5LiN5q2j56GuISIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgbmFtZSA9IGZvcm0ubmFtZTsKICAgICAgICAgICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm1lc3NhZ2U9IueUqOaIt+WQjeS4jeiDveS4uuepuiEiOwoKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueUqOaIt+WQjeS4jeiDveS4uuepuiEiKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9ZWxzZSBpZiAobmFtZS5sZW5ndGggPCAzIHx8IG5hbWUubGVuZ3RoID4gMTIpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJybWVzc2FnZT0i55So5oi35ZCN6ZW/5bqm6aG75ZyoIDMg5YiwIDEyIOS4quWtl+espiEiOwoKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueUqOaIt+WQjemVv+W6pumhu+WcqCAzIOWIsCAxMiDkuKrlrZfnrKYhIikKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHB3ZCA9IGZvcm0ucGFzc3dvcmQ7CiAgICAgICAgICAgIGlmIChwd2QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm1lc3NhZ2U9IuWvhueggeS4jeiDveS4uuepuiI7CgogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5a+G56CB5LiN6IO95Li656m6IikgOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYocHdkLmxlbmd0aCA8IDYgfHwgcHdkLmxlbmd0aCA+IDE2KSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm1lc3NhZ2U9IuWvhueggemVv+W6pumhu+WcqCA2IOWIsCAxNiDkuKrlrZfnrKYiOwoKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWvhueggemVv+W6pumhu+WcqCA2IOWIsCAxNiDkuKrlrZfnrKYiKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybS5iaXJ0aGRheSkKICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShmb3JtLmJpcnRoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZGF0ZSk7CiAgICAgICAgICAgIGlmKHRoaXMubm9uYWdlKGRhdGUpPT1mYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJtZXNzYWdlPSLmnKrmiJDlubTkurrkuI3og73ms6jlhozotKbmiLfvvIEiOwoKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuacquaIkOW5tOS6uuS4jeiDveazqOWGjOi0puaIt++8gSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3JtLmJpcnRoZGF5ID0gdGhpcy5iaXJ0aF9mb3JtYXQoZm9ybS5iaXJ0aGRheSk7CgogICAgICAgICAgICBsZXQgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4OC91c2VyL3JlZyc7CiAgICAgICAgICAgIC8vIGF4aW9zLnBvc3QodXJsLCBmb3JtKQogICAgICAgICAgICAvLyAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PnsKICAgICAgICAgICAgLy8gICAgIC8v6L+Z6YeM6L+Y57y65bCR6ZSZ6K+v5aSE55CG77yM5q+U5aaC572R57uc6ZSZ6K+v5LuA5LmI55qECiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgICAgIC8vICAgICBzd2l0Y2ggKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgLy8gICAgICAgICBjYXNlICJwaG9uZSBlcnJvciI6CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIui/meS4quaJi+acuuWPt+W3suazqOWGjOi/h+WVpu+8gSIpOwogICAgICAgICAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgLy8gICAgICAgICBjYXNlICJuYW1lIGVycm9yIjoKICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6L+Z5Liq5ZCN5a2X5bey57uP5pyJ5Lq655So6L+H5ZWm77yBIik7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAvLyAgICAgICAgIGNhc2UgInN1Y2Nlc3MiOgogICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmVycm1lc3NhZ2U9IuazqOWGjOaIkOWKn++8gSI7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5rOo5YaM5oiQ5Yqf77yBIik7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpOwogICAgICAgICAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgLy8gICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyPT57CiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgIC8vIDsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhpb3MucG9zdCh1cmwpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICBpZihyZXM9PSdzdWNjZXNzJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJybWVzc2FnZT0ic3VjY2VzcyI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm1lc3NhZ2U9ImZhaWwiOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["signupForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"signupForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-form :rules=\"rules\" :model=\"registerForm\" class=\"registerRoot\">\n        <h3 class=\"registerTitle\">注册</h3>\n        <el-form-item prop=\"phone\">\n            <el-input type=\"text\" v-model=\"registerForm.phone\" auto-complete=\"off\"\n                      placeholder=\"请输入手机号码\"/>\n        </el-form-item>\n        <el-form-item prop=\"name\">\n            <el-input type=\"text\" v-model=\"registerForm.name\" auto-complete=\"off\"\n                      placeholder=\"请输入用户名\"/>\n        </el-form-item>\n        <el-form-item >\n            <el-date-picker\n                    v-model=\"registerForm.birthday\"\n                    type=\"date\"\n                    size=\"middle\"\n                    format=\"yyyy-MM-dd\"\n                    placeholder=\"请选择生日\"\n                    clear-icon=\"none\"\n                    style=\"text-align: left\"\n            >\n            </el-date-picker>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n            <el-input type=\"text\" v-model=\"registerForm.password\" auto-complete=\"off\"\n                      placeholder=\"请输入密码\" show-password/>\n        </el-form-item>\n        <el-button type=\"primary\" style=\"width: 100%\" @click=\"register\">注册</el-button>\n    </el-form>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        name: \"SignUpForm\",\n        data() {\n            return {\n                errmessage:\"\",\n                registerForm: {\n                    phone    : '',\n                    name     : '',\n                    password : '',\n                    birthday : '',\n                    type     : 0, // 默认为普通用户\n                    sex      : 1, // 默认为男（1）\n                    avatar: {\n                        base64: 'http://bpic.588ku.com/element_pic/01/55/09/6357474dbf2409c.jpg'\n                    }\n                },\n\n            }\n        },\n        methods: {\n            nonage(date) { // 判断是否满14周岁\n                let curr = new Date();\n                if((curr.getFullYear()-date.getFullYear()>14 )||(curr.getFullYear()-date.getFullYear()==14)&&(curr.getMonth() > date.getMonth()||(curr.getMonth()==date.getMonth()&&curr.getDate()>date.getDate())))\n                    return true;\n                else return false;\n            },\n            birth_format(date) {\n                let birth = date.getFullYear() + '-';\n                if (date.getMonth() < 10)\n                    birth += '0';\n                let month=date.getMonth()+1;\n                birth += (month+ '-');\n\n                if (date.getDate() < 10)\n                    birth += '0';\n\n                return (birth + date.getDate());\n            },\n            register() {\n                let form = this.registerForm;\n                let phone = form.phone;\n                if (phone.length === 0) {\n                    this.errmessage=\"电话号码不能为空!\";\n                    this.$message.error(\"电话号码不能为空!\")\n                    return false;\n                } else {\n                    let format = /^(1[0-9]{10})$/;\n                    if (!format.test(phone)) {\n                        this.errmessage=\"电话号码格式不正确!\";\n                        this.$message.error(\"电话号码格式不正确!\")\n                        return false;\n                    }\n                }\n\n                let name = form.name;\n                if (name.length === 0) {\n                    this.errmessage=\"用户名不能为空!\";\n\n                    this.$message.error(\"用户名不能为空!\")\n                    return false;\n                }else if (name.length < 3 || name.length > 12) {\n                    this.errmessage=\"用户名长度须在 3 到 12 个字符!\";\n\n                    this.$message.error(\"用户名长度须在 3 到 12 个字符!\")\n                    return false;\n                }\n\n                let pwd = form.password;\n                if (pwd.length === 0) {\n                    this.errmessage=\"密码不能为空\";\n\n                    this.$message.error(\"密码不能为空\") ;\n                    return false;\n                } else if(pwd.length < 6 || pwd.length > 16) {\n                    this.errmessage=\"密码长度须在 6 到 16 个字符\";\n\n                    this.$message.error(\"密码长度须在 6 到 16 个字符\");\n                    return false;\n                }\n\n                console.log(form.birthday)\n                let date = new Date(form.birth);\n                console.log(date);\n                if(this.nonage(date)==false) {\n                    this.errmessage=\"未成年人不能注册账户！\";\n\n                    this.$message.error(\"未成年人不能注册账户！\");\n                    return false;\n                }\n\n                form.birthday = this.birth_format(form.birthday);\n\n                let url = 'http://localhost:8088/user/reg';\n                // axios.post(url, form)\n                //     .then((response) =>{\n                //     //这里还缺少错误处理，比如网络错误什么的\n                //         console.log(response)\n                //     switch (response.data) {\n                //         case \"phone error\":\n                //             this.$message.error(\"这个手机号已注册过啦！\");\n                //             break;\n                //         case \"name error\":\n                //             this.$message.error(\"这个名字已经有人用过啦！\");\n                //             break;\n                //         case \"success\":\n                //             this.errmessage=\"注册成功！\";\n                //             this.$message.success(\"注册成功！\");\n                //\n                //             this.$router.push('/home');\n                //             break;\n                //         default:\n                //             break;\n                //     }\n                // }).catch(err=>{\n                //     console.log(err)\n                // })\n                // ;\n                return this.axios.post(url).then(res=>{\n                    if(res=='success') {\n                        this.errmessage=\"success\";\n                        return true;\n                    }\n                    else {\n                        this.errmessage=\"fail\";\n\n                        return false;\n                    }\n                });\n\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .registerRoot {\n        width: 220px;\n        height: 360px;\n        border-radius: 15px;\n        background-clip: padding-box;\n        margin: auto auto;\n        border: 1px solid #eaeaea;\n        box-shadow: 0 0 25px #c6c6c6;\n    }\n    .registerTitle {\n        margin: 15px auto 20px auto;\n        text-align: center;\n        color: #505050;\n    }\n</style>\n"]}]}