{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js!/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/signinForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/signinForm.vue","mtime":1595238032642},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hlY2tlZDogZmFsc2UsCiAgICAgIGlzU3VibWl0OiBmYWxzZSwKICAgICAgZXJybWVzc2FnZTogIiIsCiAgICAgIGZvcm06IHsKICAgICAgICBwaG9uZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfnlLXor53lj7fnoIHkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAxMSwKICAgICAgICAgIG1heDogMTEsCiAgICAgICAgICBtZXNzYWdlOiAn55S16K+d5Y+356CB5Li6MTHkvY3mlbDlrZcnCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiA2LAogICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHplb/luqblnKggNiDliLAgMTYg5Liq5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaXNTdWJtaXQpIHsKICAgICAgICB0aGlzLmlzU3VibWl0ID0gdHJ1ZTsgLy8g6Ziy5q2i5oG25oSP5aSa5qyh54K55Ye7CgogICAgICAgIHZhciB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDg4L3VzZXIvbG9naW4nICsgJz9waD0nICsgdGhpcy5mb3JtLnBob25lICsgJyZwd2Q9JyArIHRoaXMuZm9ybS5wYXNzd29yZDsKICAgICAgICBheGlvcy5wb3N0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIHZhciB1c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpOwoKICAgICAgICAgIGlmICh1c2VyLmlkID49IDApIHsKICAgICAgICAgICAgaWYgKHVzZXIudHlwZSA8IDApIHsKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+l6LSm5oi35bey6KKr5bCB56aB77yBIik7CgogICAgICAgICAgICAgIF90aGlzLmlzU3VibWl0ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuJHJvb3QubG9nZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpcy4kcm9vdC5pc19zdXBlcnVzZXIgPSB1c2VyLnR5cGUgIT09IDA7IC8vIOeZu+W9leWQjui/memHjOWtmOWQhOenjXNlc3Npb27nmoTmlbDmja4KCiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgicGhvbmUiLCB1c2VyLnBob25lKTsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJuYW1lIiwgdXNlci5uYW1lKTsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJpZCIsIHVzZXIuaWQpOwogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJNb25nbyIsIEpTT04uc3RyaW5naWZ5KHVzZXIudXNlck1vbmdvKSk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidHlwZSIsIHVzZXIudHlwZSk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic2V4IiwgdXNlci5zZXgpOwogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImJpcnRoZGF5IiwgdXNlci5iaXJ0aGRheSk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgicmVnX3RpbWUiLCB1c2VyLnJlZ190aW1lKTsgLy8g6K6w5L2P5a+G56CBCgogICAgICAgICAgICAgIGlmIChfdGhpcy5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJwd2QiLCBfdGhpcy5mb3JtLnBhc3N3b3JkKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh1c2VyLnR5cGUgPT09IDApIHsKICAgICAgICAgICAgICAgIF90aGlzLmVycm1lc3NhZ2UgPSAn55So5oi3ICcgKyB1c2VyLm5hbWUgKyAnIOeZu+W9leaIkOWKn++8gSc7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyLnR5cGUgPT09IDgpIHsKICAgICAgICAgICAgICAgIF90aGlzLmVycm1lc3NhZ2UgPSAn6ICB5p2/5aW977yBJzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuZXJybWVzc2FnZSA9ICfnrqHnkIblkZjnlKjmiLcnICsgdXNlci5uYW1lICsgJ+eZu+W9leaIkOWKnyc7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKF90aGlzLmVycm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodXNlci5pZCA9PT0gLTEpIHsKICAgICAgICAgICAgICBfdGhpcy5lcnJtZXNzYWdlID0gJ+atpOi0puaIt+S4jeWtmOWcqO+8gSc7CgogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfmraTotKbmiLfkuI3lrZjlnKjvvIEnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHVzZXIuaWQgPT09IC0yKSB7CiAgICAgICAgICAgICAgX3RoaXMuZXJybWVzc2FnZSA9ICflr4bnoIHplJnor6/vvIzor7fph43mlrDovpPlhaXvvIEnOwoKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5a+G56CB6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWl77yBJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzLmlzU3VibWl0ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMuYXhpb3MucG9zdCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgcmV0dXJuIHJlcyA9PT0gJ3N1Y2Nlc3MnOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc2lnbnVwJyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["signinForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAJA;AAQA,MAAA,KAAA,EAAA;AACA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,QAAA,EAAA,IADA;AACA,UAAA,OAAA,EAAA,UADA;AACA,UAAA,OAAA,EAAA;AADA,SADA,EAGA;AACA,UAAA,GAAA,EAAA,EADA;AACA,UAAA,GAAA,EAAA,EADA;AACA,UAAA,OAAA,EAAA;AADA,SAHA,CADA;AAOA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,QAAA,EAAA,IADA;AACA,UAAA,OAAA,EAAA,QADA;AACA,UAAA,OAAA,EAAA;AADA,SADA,EAGA;AACA,UAAA,GAAA,EAAA,CADA;AACA,UAAA,GAAA,EAAA,EADA;AACA,UAAA,OAAA,EAAA,kBADA;AACA,UAAA,OAAA,EAAA;AADA,SAHA;AAPA;AARA,KAAA;AAuBA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,QAAA,GAAA,IAAA,CADA,CACA;;AAEA,YAAA,GAAA,GAAA,qCACA,MADA,GACA,KAAA,IAAA,CAAA,KADA,GAEA,OAFA,GAEA,KAAA,IAAA,CAAA,QAFA;AAIA,QAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,cAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AACA,cAAA,IAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AAEA,gBAAA,IAAA,CAAA,IAAA,GAAA,CAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,UAAA;;AACA,cAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,aAHA,MAKA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,YAAA,GAAA,IAAA,CAAA,IAAA,KAAA,CAAA,CAFA,CAIA;;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,OAAA,EAAA,IAAA,CAAA,KAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,IAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,IAAA,EAAA,IAAA,CAAA,EAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,WAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,IAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,IAAA,CAAA,GAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,QAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,QAAA,EAZA,CAcA;;AACA,kBAAA,KAAA,CAAA,OAAA,EAAA;AACA,gBAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AAEA,kBAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,UAAA,GAAA,QAAA,IAAA,CAAA,IAAA,GAAA,QAAA;AACA,eAFA,MAIA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,UAAA,GAAA,MAAA;AACA,eAFA,MAIA;AACA,gBAAA,KAAA,CAAA,UAAA,GAAA,UAAA,IAAA,CAAA,IAAA,GAAA,MAAA;AACA;;AAEA,cAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA,WAxCA,MA0CA;AACA,gBAAA,IAAA,CAAA,EAAA,KAAA,CAAA,CAAA,EAAA;AACA,cAAA,KAAA,CAAA,UAAA,GAAA,SAAA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA;AACA;;AAEA,gBAAA,IAAA,CAAA,EAAA,KAAA,CAAA,CAAA,EAAA;AACA,cAAA,KAAA,CAAA,UAAA,GAAA,aAAA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA;;AAEA,YAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA;AACA,SA3DA;AA4DA,eAAA,KAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,iBAAA,GAAA,KAAA,SAAA;AACA,SAFA,CAAA;AAGA;;AACA,aAAA,KAAA;AACA,KA1EA;AA2EA,IAAA,MA3EA,oBA2EA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,SAAA;AACA,aAAA,IAAA;AACA;AA9EA;AA1BA,CAAA","sourcesContent":["<template>\n    <div class=\"extern\">\n        <div class=\"login\">\n            <div class=\"tag\">\n                账号登录\n            </div>\n            <div class=\"form\">\n                <el-form ref=\"form\" :model=\"form\" @keyup.native.enter=\"onSubmit\" label-width=\"11%\">\n                    <el-form-item props=\"phone\">\n                        <el-input id=\"signinForm_input_phone\"  type=\"text\" v-model=\"form.phone\"  auto-complete=\"off\" placeholder=\"请输入手机号码\"/>\n                    </el-form-item>\n                    <el-form-item prop=\"password\">\n                        <el-input\n                                id=\"signinForm_input_password\"\n                                type=\"text\" v-model=\"form.password\" auto-complete=\"off\"\n                                placeholder=\"请输入账户密码\" show-password/>\n                    </el-form-item>\n                </el-form>\n            </div>\n\n            <div class=\"pwd-mem\">\n                <div class=\"remember\">\n                    <el-checkbox v-model=\"checked\">记住密码</el-checkbox>\n                </div>\n\n                <div class=\"forget\">\n                    <el-link href=\"\">忘记密码</el-link>\n                </div>\n            </div>\n\n            <div class=\"btn\">\n                <el-button id=\"signinForm_button_login\" type=\"success\" @click=\"onSubmit\" size=\"medium\" style=\"width: 80%\">登录</el-button>\n            </div>\n\n            <div class=\"signup\">\n                <span>还没有WeIns账号？</span>\n                <router-link to=\"/signup\"><el-button id=\"signinForm_button_signup\" type=\"text\" @click=\"signup\">立即注册>></el-button></router-link>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        data() {\n            return {\n                checked: false,\n                isSubmit: false,\n                errmessage:\"\",\n                form: {\n                    phone: '',\n                    password: '',\n                },\n                rules: {\n                    phone: [\n                        {\n                            required: true, message: '电话号码不能为空', trigger: 'blur'\n                        },{\n                            min: 11, max: 11, message: '电话号码为11位数字'\n                        }],\n                    password: [\n                        {\n                            required: true, message: '密码不能为空', trigger: 'blur'\n                        },{\n                            min: 6, max: 16, message: '密码长度在 6 到 16 个字符', trigger: 'blur'\n                        }],\n                },\n            }\n        },\n        methods: {\n            onSubmit() {\n                if (!this.isSubmit) {\n                    this.isSubmit = true; // 防止恶意多次点击\n\n                    let url = 'http://localhost:8088/user/login' +\n                        '?ph=' + this.form.phone +\n                        '&pwd=' + this.form.password;\n\n                    axios.post(url).then((response) => {\n                        console.log(response);\n                        let user = response.data;\n                        console.log(user);\n                        if (user.id >= 0) {\n\n                            if (user.type < 0) {\n                                this.$message.error(\"该账户已被封禁！\");\n                                this.isSubmit = false;\n                            }\n\n                            else {\n                                this.$root.logged = true;\n                                this.$root.is_superuser=(user.type !== 0);\n\n                                // 登录后这里存各种session的数据\n                                sessionStorage.setItem(\"phone\", user.phone);\n                                sessionStorage.setItem(\"name\", user.name);\n                                sessionStorage.setItem(\"id\", user.id);\n                                sessionStorage.setItem(\"userMongo\", JSON.stringify(user.userMongo))\n                                sessionStorage.setItem(\"type\", user.type);\n                                sessionStorage.setItem(\"sex\", user.sex);\n                                sessionStorage.setItem(\"birthday\", user.birthday);\n                                sessionStorage.setItem(\"reg_time\", user.reg_time);\n\n                                // 记住密码\n                                if (this.checked) {\n                                    sessionStorage.setItem(\"pwd\", this.form.password);\n                                }\n\n                                if (user.type === 0) {\n                                    this.errmessage = '用户 ' + user.name + ' 登录成功！';\n                                }\n\n                                else if (user.type === 8) {\n                                    this.errmessage = '老板好！';\n                                }\n\n                                else {\n                                    this.errmessage = '管理员用户' + user.name + '登录成功';\n                                }\n\n                                this.$message.success(this.errmessage);\n                            }\n                        }\n\n                        else {\n                            if (user.id === -1) {\n                                this.errmessage='此账户不存在！';\n                                this.$message.error('此账户不存在！');\n                            }\n\n                            if (user.id === -2) {\n                                this.errmessage='密码错误，请重新输入！';\n                                this.$message.error('密码错误，请重新输入！');\n                            }\n\n                            this.isSubmit = false;\n                        }\n                    })\n                    return this.axios.post(url).then(res=>{\n                        return res === 'success';\n                    });\n                }\n                return false;\n            },\n            signup() {\n                this.$router.push('/signup');\n                return true;\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .extern {\n        width: 100%;\n    }\n\n    .login {\n        width: 100%;\n        margin-top: 5%;\n        background-color: white;\n        border-radius: 2px;\n        text-align: center;\n    }\n\n    .tag {\n        font-size: 20px;\n        font-weight: 600;\n        padding-top: 20px;\n        background-color: white;\n    }\n\n    .form {\n        width: 90%;\n        margin-top: 5%;\n    }\n\n    .remember {\n        margin-left: 10%;\n        float: left;\n    }\n\n    .forget {\n        margin-right: 10%;\n        float: right;\n    }\n\n    .btn {\n        padding-top: 20px;\n    }\n\n    .signup {\n        color: #8B8B8B;\n        font-size: 12px;\n    }\n</style>\n"],"sourceRoot":"src/components"}]}