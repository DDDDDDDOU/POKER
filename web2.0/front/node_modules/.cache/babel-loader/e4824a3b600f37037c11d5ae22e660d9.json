{"remainingRequest":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js!/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/web2.0/WeIns_F/src/components/personalcard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/web2.0/WeIns_F/src/components/personalcard.vue","mtime":1599316367489},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/babel-loader/lib/index.js","mtime":1594082385506},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/cache-loader/dist/cjs.js","mtime":1594082385499},{"path":"/Users/user/Desktop/web2.0/WeIns_F/node_modules/vue-loader/lib/index.js","mtime":1594082401315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBkYXRlX2ZsYWc6IGZhbHNlLAogICAgICBvcmlnaW5fYXZhdGFyOiAnJywKICAgICAgdXNlcjogewogICAgICAgIGlkOiAwLAogICAgICAgIG5hbWU6ICfkuqTpgJrlpKflraYnLAogICAgICAgIGJpcnRoZGF5OiAnMTg5Ni0wNC0wNycsCiAgICAgICAgc2V4OiAtMSwKICAgICAgICByZWdfdGltZTogJzIwMjAtMDctMDEnLAogICAgICAgIHBob25lOiAnMDIxMTM0MjAwMDAwJywKICAgICAgICB1c2VyTW9uZ286IHsKICAgICAgICAgIGF2YXRhcjogJycKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZW5lcmF0b3IoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdlbmVyYXRvcjogZnVuY3Rpb24gZ2VuZXJhdG9yKCkgewogICAgICB0aGlzLnVzZXIuaWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpZCIpOwogICAgICBpZiAodGhpcy51c2VyLmlkID09IG51bGwpIHRoaXMudXNlci5pZCA9ICcxMjMnOwogICAgICB2YXIgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4OC91c2VyL2dldFBsYWluT25lP2lkPScgKyB0aGlzLnVzZXIuaWQ7IC8vIGF4aW9zLmdldCh1cmwsIHsKICAgICAgLy8gICAgIGhlYWRlcnM6IHsKICAgICAgLy8gICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAvLyAgICAgfQogICAgICAvLyB9KS50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICB0aGlzLnVzZXIgPSByZXMuZGF0YTsKICAgICAgLy8gICAgIHRoaXMub3JpZ2luX2F2YXRhciA9IHRoaXMudXNlci51c2VyTW9uZ28uYXZhdGFyOwogICAgICAvLyB9KS5jYXRjaChlcnIgPT4gewogICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgLy8gfSk7CgogICAgICByZXR1cm4gdGhpcy5heGlvcy5wb3N0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmV0dXJuIHJlcyA9PT0gJ3N1Y2Nlc3MnOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRCYXNlNjQ6IGZ1bmN0aW9uIGdldEJhc2U2NChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgdmFyIGltZ1Jlc3VsdCA9ICcnOwogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwoKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaW1nUmVzdWx0ID0gcmVhZGVyLnJlc3VsdDsKICAgICAgICB9OwoKICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9OwoKICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZShpbWdSZXN1bHQpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGdldEZpbGU6IGZ1bmN0aW9uIGdldEZpbGUoZmlsZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5nZXRCYXNlNjQoZmlsZS5yYXcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnVzZXIudXNlck1vbmdvLmF2YXRhciA9IHJlczsKICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlX2ZsYWcgPSB0cnVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy51cGRhdGVfZmxhZyA9IGZhbHNlOwogICAgICB0aGlzLnVzZXIudXNlck1vbmdvLmF2YXRhciA9IHRoaXMub3JpZ2luX2F2YXRhcjsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQoKSB7CiAgICAgIHZhciB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDg4L3VzZXIvdXBkYXRlJzsKICAgICAgY29uc29sZS5sb2codXJsKTsKICAgICAgdmFyIGZvcm0gPSB0aGlzLnVzZXI7CiAgICAgIGZvcm0uYXZhdGFyID0gdGhpcy51c2VyLnVzZXJNb25nby5hdmF0YXI7IC8vIGF4aW9zLnBvc3QodXJsLCBmb3JtLCB7CiAgICAgIC8vICAgICBoZWFkZXJzOiB7CiAgICAgIC8vICAgICAgICAgdG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSkudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgaWYocmVzLmRhdGEgPT09ICdzdWNjZXNzJykKICAgICAgLy8gICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaNouWktOWDj+aIkOWKn++8gScpOwogICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyB9KS5jYXRjaChlcnIgPT4gewogICAgICAvLyAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAvLyB9KTsKCiAgICAgIHRoaXMudXBkYXRlX2ZsYWcgPSBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMuYXhpb3MucG9zdCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJldHVybiByZXMgPT09ICdzdWNjZXNzJzsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["personalcard.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"extern\">\n        <el-card style=\"width: 90%; text-align: center; margin-left: 5%\">\n                <div class=\"back\">\n                    <img class=\"pic\" v-bind:src=\"user.userMongo.avatar\" alt=\"picture\"/>\n                    <div class=\"text1\">\n                        {{user.name}}\n                    </div>\n                    <div class=\"text2\" v-if=\"this.update_flag === false\">\n                        <el-upload\n                                action='string'\n                                style=\"width: 80%;z-index: 998\"\n                                class=\"avatar-uploader\"\n                                :on-change=\"getFile\"\n                                :limit=\"1\"\n                                :auto-upload=\"false\"\n                                :show-file-list=\"false\"\n                                accept=\".jpg,.jpeg,.png\">\n                            <el-button size=\"mini\" type=\"plain\" icon=\"el-icon-upload\">上传头像</el-button>\n                        </el-upload>\n                    </div>\n\n                    <div v-if=\"this.update_flag === true\" class=\"text3\">\n                        <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-check\" @click=\"upload\"></el-button>\n                        <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-close\" @click=\"cancel\"></el-button>\n                    </div>\n                </div>\n                <el-menu class=\"el-menu-demo\" mode=\"horizontal\" default-active=\"1\">\n                    <el-menu-item class=\"menu\" index=\"1\">我的主页</el-menu-item>\n                    <el-menu-item class=\"menu\" index=\"2\">管理中心</el-menu-item>\n                </el-menu>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\";\n\n    export default {\n        data() {\n            return {\n                update_flag: false,\n                origin_avatar: '',\n                user: {\n                    id: 0,\n                    name: '交通大学',\n                    birthday: '1896-04-07',\n                    sex: -1,\n                    reg_time: '2020-07-01',\n                    phone: '021134200000',\n                    userMongo: {\n                        avatar: ''\n                    }\n                }\n            }\n        },\n        created() {\n            this.generator();\n        },\n        methods: {\n            generator() {\n                this.user.id = sessionStorage.getItem(\"id\");\n                if(this.user.id==null) this.user.id='123';\n                let url = 'http://localhost:8088/user/getPlainOne?id=' + this.user.id;\n\n                // axios.get(url, {\n                //     headers: {\n                //         token: sessionStorage.getItem(\"token\")\n                //     }\n                // }).then(res => {\n                //     this.user = res.data;\n                //     this.origin_avatar = this.user.userMongo.avatar;\n                // }).catch(err => {\n                //     console.log(err);\n                // });\n                return this.axios.post(url).then(res=>{\n                    return res === 'success';\n                });\n            },\n            getBase64(file) {\n                return new Promise(function (resolve, reject) {\n                    let reader = new FileReader();\n                    let imgResult = '';\n                    reader.readAsDataURL(file);\n                    reader.onload = function () {\n                        imgResult = reader.result;\n                    };\n                    reader.onerror = function (error) {\n                        reject(error);\n                    };\n                    reader.onloadend = function () {\n                        resolve(imgResult);\n                    };\n                });\n            },\n            getFile(file) {\n\n                this.getBase64(file.raw).then(res => {\n                    this.user.userMongo.avatar = res;\n                });\n\n                this.update_flag = true;\n                return true;\n            },\n            cancel() {\n                this.update_flag = false;\n                this.user.userMongo.avatar = this.origin_avatar;\n                return true;\n            },\n            upload() {\n                let url = 'http://localhost:8088/user/update';\n                console.log(url);\n\n                let form = this.user;\n                form.avatar = this.user.userMongo.avatar;\n\n                // axios.post(url, form, {\n                //     headers: {\n                //         token: sessionStorage.getItem(\"token\")\n                //     }\n                // }).then(res => {\n                //     if(res.data === 'success')\n                //         this.$message.success('更换头像成功！');\n                //     console.log(res.data);\n                // }).catch(err => {\n                //    console.log(err);\n                // });\n\n                this.update_flag = false;\n                return this.axios.post(url).then(res=>{\n                    return res === 'success';\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .extern {\n        width: 100%;\n        flex-direction: column;\n    }\n\n    .back {\n        width: 100%;\n        height: 300px;\n        background: url(\"../assets/image/poster_1.png\");\n    }\n\n    .pic {\n        margin-top: 40px;\n        width: 150px;\n        height:150px;\n        border-radius: 75px;\n        clear: both;\n    }\n\n    .text1 {\n        text-align: center;\n        clear: both;\n        color: white;\n        font-size: xx-large;\n    }\n\n    .text2 {\n        clear: both;\n        text-align: center;\n        color: #c6c6c6;\n        margin-top: 20px;\n        margin-left: 130px;\n    }\n\n    .text3 {\n        clear: both;\n        text-align: center;\n        color: #c6c6c6;\n        margin-top: 20px;\n    }\n\n    .menu {\n        width: 50%;\n    }\n\n</style>\n"],"sourceRoot":"src/components"}]}